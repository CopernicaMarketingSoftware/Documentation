# Information about the job

When you run your mapreduce job you are obviously mostly interested in the
result of the job. However, mapreduce jobs may take a long time and it may 
be useful for you to get some information on where this time is spend, how
many processes were used, how many temporary files were created, etc. You can
use this information to tweak your mapreduce algorithm or to fine tune the
behavior of the job by using its [tuning settings](copernica-docs:Yothalot/tuning).

We provide you all the information about a finished job in the **Yothalot\Result** class. 
This **Yothalot\Result** class holds results on the behavior of a job.
You cannot create a results class yourself as this would not make any sense,
yet, **Yothalot\Results** classes are returned by the `wait()` method of the 
**Yothalot\Job class**. The class provides you all the information on the 
behaviour of the job you want and probably some extra. However, if there is relevant 
information that you would like to have but is currently not provided,
please contact us by sending an email to [info@copernica.com](mailto:info@copernica.com)

## The Yothalot\Result class

The **Yothalot\Result** class provides the general information of the job, i.e.
the time when the job was started and the runtime. The class also gives
you access to classes that hold statistics on the individual steps of the mapreduce
algorithm, i.e. the mapper step, the reducer step, and the finalizer step.
 The interface of the Yothalot\Result class looks as follows:

```php
class Yothalot\Result
{
    /**
     *  Get the time when the job was started (in Unix time)
     */
    public function started()
    
    /**
     *  Get the runtime of the job (in seconds)
     */
    public function runtime()

    /**
     *  Get the statistics class of the mappers of the job
     */
    public function mappers()
    
    /**
     *  Get the statistics class of the reducers of the job
     */
    public function reducers()
    
    /**
     *  Get the statistics class of the finalizers of the job
     */
    public function finalizers()
};    
```
Using this class is simple. You can call `wait()` from your job and
retrieve the results and call the members that you are interested in.
You can use it e.g. like this:

```php
/**
 *  call wait on your job and get the results
 */
$result = $job->wait();

/**
 *  print some of the results
 */
echo("The job started on: ".$result->started()."\n");
echo("The runtime was: ".$result->runtime()."\n");
```

## The Yothalot\Stats class

A mapreduce job has three basic steps. A mapper step, a reducer step and
a finalizer, or writer, step. Information on each step is stored in the 
Yothalot\Stats class and can be retrieved via the above listed members
`mappers()`, `reducers()`, and `finalizers()`. The interface of this class 
looks as follows.

```php
class Yothalot\Stats
{
    /**
     *  get the time the first mapper, reducer, or finalizer was started (in Unix time)
     */
    public function first()
    
    /**
     *  get the time the last mapper, reducer, or finalizer was started (in Unix time)
     */
    public function last()
    
    /**
     *  get the time the last mapper, reducer, or finalizer was finished (in Unix time)
     */
    public function finished()

    /**
     *  get the running time of the mappers, reducers, or finalizers (in seconds)
     *  @return Php::Value
     */
    public function runtime()

    /**
     *  get the running time of the fastest mapper, reducer, or finalizer (in seconds)
     */
    public function fastest()

    /**
     *  get the running time of the slowest mapper, reducer, or finalizer (in seconds)
     */
    public function slowest()

    /**
     *  get the number of mapper, reducer, or finalizer processes
     */
    public function processes()

    /**
     *  get an object with information on the input used by the mappers,
     *  reducers, or finalizers
     */
    public function input()

    /**
     *  get an object with information on the output generated by the mappers,
     *  reducers, or finalizers
     */
    public function output()
};
```
All the members can be called on an object you get from calling `mappers()`,
`reducers()`, and `finalizers()`, or you can call them directly as listed below.

```php
/**
 *  call wait on your job and get the results
 */
$result = $job->wait();

/**
 *  print some results on the mappers and reducers
 */
echo("The first mapper started on: ".$result->mappers()->first()."\n");
echo("The runtime of the fastest reducer was: ".$result->reducers()->fastest()."\n");
```
As you can see you can get quite some details about the job. You can e.g. see
which step is spending the most time. This information may help you to adjust
your algorithm for the job or [fine tune](copernica-docs:Yothalot/tuning) the 
job behavior.


## The Yothalot\DataStats class

The mapper, reducer, and finalizer steps may produce temporary files that are used
by the step itself or are used to pass information from one step to the next one.
You can use the Yothalot\DataStas object to get insight in the amount of 
temporary files and their sizes that are consumed and created in each step. 
The interface of Yothalot\DataStats class is as follows:
```php
class DataStats
{
    /**
     *  get the number of files
     */
    public function files()
    
    /**
     *  get the number of bytes
     */
    public function bytes()
};
```
You can use it like:
```php
/**
 *  call wait on your job and get the results
 */
$result = $job->wait();

/**
 *  print some of the results on temporary files and bytes
 */
echo("The number of temporary bytes produced by the mapper is:  ".$result->mappers()->output()->bytes()."\n");
echo("The number of temporary files consumed by the reducer is: ".$result->reducers()->input()->files()."\n");
```
The information on the number of files and their sizes may again help you 
to adjust your algorithm and use the [tuning settings](copernica-docs:Yothalot/tuning)
to increase the performance of your mapreduce job.
